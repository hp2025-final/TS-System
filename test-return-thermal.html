<!DOCTYPE html>
<html>
<head>
    <title>Return Slip Thermal Print Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .test-data {
            background: #e9ecef;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .green {
            background: #28a745;
        }
        .green:hover {
            background: #1e7e34;
        }
    </style>
</head>
<body>
    <h1>Return Slip Thermal Print Test</h1>
    <p>This page tests the thermal return slip generation similar to your POS thermal invoice.</p>

    <div class="test-section">
        <h3>Test 1: Simple Return</h3>
        <div class="test-data">
Return Type: Return for Refund
Item: Meera Collection Dress (Size M)
Original Price: Rs. 8,500
GST: 17% (Rs. 1,445)
Total Paid: Rs. 9,945
Refund Amount: Rs. 9,945
        </div>
        <button onclick="testSimpleReturn()">Test Simple Return Print</button>
    </div>

    <div class="test-section">
        <h3>Test 2: Exchange</h3>
        <div class="test-data">
Return Type: Exchange
Original Item: Meera Collection (Size M) - Rs. 9,945
Exchange Item: Sara Collection (Size L) - Rs. 12,500
Difference: Additional Rs. 2,555
        </div>
        <button onclick="testExchange()" class="green">Test Exchange Print</button>
    </div>

    <div class="test-section">
        <h3>Test Data Structure</h3>
        <p>The thermal return slip uses the same paper size and design as your POS invoice:</p>
        <ul>
            <li><strong>Paper Width:</strong> 80mm thermal paper</li>
            <li><strong>Content Width:</strong> 70mm</li>
            <li><strong>Font:</strong> Courier New, 12px</li>
            <li><strong>Company Header:</strong> TASNEEM SHAMIM branding</li>
            <li><strong>Same Layout:</strong> Matches your thermal invoice design</li>
        </ul>
    </div>

    <script type="module">
        // Import the thermal return slip generator
        import { thermalReturnSlip } from './resources/js/services/ThermalReturnSlipGenerator.js'

        // Test simple return
        window.testSimpleReturn = async () => {
            const returnData = {
                selectedItem: {
                    dress_name: "Meera Collection Dress",
                    collection_name: "Meera Collection",
                    size: "M",
                    barcode: "TSM001234567",
                    sku: "TSM-MEERA-M-001",
                    original_price: "8500.00",
                    tax_percentage: "17",
                    tax_amount: "1445.00",
                    total_discount_amount: "0.00",
                    item_total: "9945.00",
                    invoice_number: "TS-250715143022"
                },
                exchangeItem: null,
                returnType: 'return',
                returnReason: 'Customer Request',
                returnNotes: 'Customer changed mind - item in perfect condition'
            }
            
            try {
                await thermalReturnSlip.generateReturnSlip(returnData)
                alert('Return slip sent to printer!')
            } catch (error) {
                console.error('Print error:', error)
                alert('Print failed: ' + error.message)
            }
        }

        // Test exchange
        window.testExchange = async () => {
            const returnData = {
                selectedItem: {
                    dress_name: "Meera Collection Dress",
                    collection_name: "Meera Collection",
                    size: "M",
                    barcode: "TSM001234567",
                    sku: "TSM-MEERA-M-001",
                    original_price: "8500.00",
                    tax_percentage: "17",
                    tax_amount: "1445.00",
                    total_discount_amount: "0.00",
                    item_total: "9945.00",
                    invoice_number: "TS-250715143022"
                },
                exchangeItem: {
                    dress: {
                        name: "Sara Collection Dress",
                        collection: {
                            name: "Sara Collection"
                        },
                        size: "L"
                    },
                    barcode: "TSM001987654",
                    final_price_with_tax: "12500.00"
                },
                returnType: 'exchange',
                returnReason: 'Wrong Size',
                returnNotes: 'Customer needs larger size'
            }
            
            try {
                await thermalReturnSlip.generateReturnSlip(returnData)
                alert('Exchange slip sent to printer!')
            } catch (error) {
                console.error('Print error:', error)
                alert('Print failed: ' + error.message)
            }
        }
    </script>
</body>
</html>
